global mode="release"

probe module( "msdos" ).function( "msdos_create" ) {
	if ( mode == "debug" ) {
		println( "msdos_create" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_create" )
		} else {
			@ops_inode_create( $dir, $dentry, $mode, $excl )
		}
	}
}

probe module( "msdos" ).function( "msdos_rmdir" ) {
	if ( mode == "debug" ) {
		println( "msdos_rmdir" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_rmdir" )
		} else {
			@ops_inode_rmdir( $dir, $dentry )
		}
	}
}

probe module( "msdos" ).function( "msdos_rename" ) {
	if ( mode == "debug" ) {
		println( "msdos_rename" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_rename" )
		} else {
			@ops_inode_rename( $old_dir, $old_dentry, $new_dir, $new_dentry )
		}
	}
}

probe module( "msdos" ).function( "msdos_unlink" ) {
	if ( mode == "debug" ) {
		println( "msdos_unlink" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_unlink" )
		} else {
			@ops_inode_unlink( $dir, $dentry )
		}
	}
}

probe module( "msdos" ).function( "msdos_mkdir" ) {
	if ( mode == "debug" ) {
		println( "msdos_mkdir" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_mkdir" )
		} else {
			@ops_inode_mkdir( $dir, $dentry, $mode )
		}
	}
}

probe module( "msdos" ).function( "msdos_lookup" ) {
	if ( mode == "debug" ) {
		println( "msdos_lookup" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_lookup" )
		} else {
			@ops_inode_lookup( $dir, $dentry, $flags )
		}
	}
}

probe module( "msdos" ).function( "msdos_hash" ) {
	if ( mode == "debug" ) {
		println( "msdos_hash" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_hash" )
		} else {
			@ops_dentry_d_hash( $dentry, $inode, $qstr )
		}
	}
}

probe module( "msdos" ).function( "msdos_cmp" ) {
	if ( mode == "debug" ) {
		println( "msdos_cmp" )
	} else {
		if ( mode == "s2e_debug" ) {
			s2e_message( "msdos_cmp" )
		} else {
			@ops_dentry_d_compare( $parent, $pinode, $dentry, $inode, $len, $str, $name )
		}
	}
}

/*
 * inode;setattr=fat_setattr
 * inode;getattr=fat_getattr
 */
